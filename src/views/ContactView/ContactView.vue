<template>
    <LoaderIcon :loading="isLoading" />
    <div class="content-head-image contact-us-head-image d-flex align-items-center">
        <div class="container-fluid">
            <div class="container">
                <h1 class="font-36 text-blue contact-us fw-bold">Contact Us</h1>
            </div>
        </div>
    </div>

    <div class="container-fluid" data-aos="fade-up" data-aos-anchor-placement="top-bottom"
        ata-aos-easing="ease-out-cubic" data-aos-duration="1400">
        <div class="container mt-5">
            <h2 class="font-36 text-blue fw-bold mb-3">Get in <span
                    class="border-blue-cus border-bottom border-2">Touch&nbsp; &nbsp; &nbsp;</span></h2>
            <div class="row mb-5 align-items-center">
                <div class="col-lg-6 col-sm-12 col-12">
                    <p class="font-16 mb-5">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been
                        the
                        industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                        type
                        and scrambled it to make a type specimen book.
                    </p>
                    <div class="row mb-sm-4">
                        <div class="col-6">
                            <div
                                class="model p-3 h-100 rounded-3 gradient-background1 d-flex flex-column justify-content-between">
                                <h5 class="text-blue font-20 fw-bold mb-4">
                                    Sri Lanka Office
                                </h5>
                                <div class="row">
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/location1.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">No. 5E/67, Level-4, Kandy
                                            Road, Kadawatha, Sri Lanka</p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/envelop.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">info@guisrilanka.com
                                        </p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/phone.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">+94 112922420 <br>
                                            +94 778883884 (Hotline)</p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/clock.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">Monday - Friday <br> 8:30 am -
                                            5:30 pm
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div
                                class="model p-3 h-100 rounded-3 gradient-background1 d-flex flex-column justify-content-between">
                                <h5 class="text-blue font-20 fw-bold mb-4">
                                    Singapore Office
                                </h5>
                                <div class="row">
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/location1.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">1 Enterprise Road #03-00,
                                            Singapore 629813</p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/envelop.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">sales@gui-solutions.com
                                        </p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/phone.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">+65 6481 7796</p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 contacts-list-cus mb-4">
                                        <img src="../../../public/images/clock.png"
                                            alt="No. 5E/67, Level-4, Kandy Road, Kadawatha, Sri Lanka."
                                            class="contact-list-image">
                                        <p class="fw-bold text-black-cus font-16 mt-1">Monday - Friday <br> 8:30 am -
                                            5:30 pm
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-12 col-12 rounded" data-aos="fade-up" data-aos-anchor-placement="top-bottom"
                    ata-aos-easing="ease-out-cubic" data-aos-duration="1400">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15840.303098385695!2d79.9529234!3d7.0003588!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae2f868986c3ceb%3A0xb1ec9ec37dfcc20d!2sGUI%20Solutions%20Lanka%20(Pvt)%20Ltd!5e0!3m2!1sen!2slk!4v1712575692517!5m2!1sen!2slk"
                        width="650" height="500" style="border:0;" allowfullscreen="true" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade" class="rounded"></iframe>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid my-4" data-aos-anchor-placement="top-bottom" ata-aos-easing="ease-out-cubic"
        data-aos-duration="1400">
        <div class="container">
            <h2 class="font-36 text-blue fw-bold mb-5 text-center" data-aos="fade-up"
                data-aos-anchor-placement="top-bottom" ata-aos-easing="ease-out-cubic" data-aos-duration="1400">Contact
                <span class="border-blue-cus border-bottom border-2">Us&nbsp;</span>
            </h2>
            <div class="row align-items-center justify-content-center">
                <div class="col-lg-6 col-sm-12 col-12">
                    <form method="post" @submit.prevent="submitForm">
                        <input type="hidden" v-model="inputData.request_method" name="request_method" value="Inquiry">
                        <div class="row" data-aos="fade-up" data-aos-anchor-placement="top-bottom"
                            ata-aos-easing="ease-out-cubic" data-aos-duration="1400">
                            <div class="col-lg-6">
                                <input class="form-control py-3 h-55 text-dark fw-bolder font-14 rounded-2 border-muted"
                                    type="text" placeholder="Your Name:*" aria-label="default input example" name="name"
                                    v-model="inputData.name" required>
                            </div>
                            <div class="col-lg-6 pt-lg-0 pt-3">
                                <input class="form-control py-3 h-55 text-dark fw-bolder font-14 rounded-2 border-muted"
                                    type="email" placeholder="Your Email:*" aria-label="default input example"
                                    name="email" v-model="inputData.email" required>
                            </div>
                            <div class="col-lg-6 pt-3">
                                <input class="form-control py-3 h-55 text-dark fw-bolder font-14 rounded-2 border-muted"
                                    type="text" placeholder="Your Phone:*" aria-label="default input example"
                                    name="phone_number" v-model="inputData.phone_number" required>
                            </div>
                            <div class="col-lg-6 pt-3">
                                <select class="form-select py-3 text-dark fw-bolder font-14 rounded-2 border-muted "
                                    name="inquiry_type_id" aria-label="Default select example"
                                    v-model="inputData.inquiry_type_id" required>
                                    <option value="" disabled selected>Inquiry:*</option>
                                    <option value="1">Mobile App Development</option>
                                    <option value="2">ERP Consultancy</option>
                                    <option value="3">eCommerce and Web Development</option>
                                    <option value="4">Business Software Solution</option>
                                    <option value="5">Become A Partner</option>
                                    <option value="6">General</option>
                                </select>
                            </div>

                            <div class="col-12 pt-4">
                                <textarea
                                    class="form-control py-3 h-55 text-dark fw-bolder font-14 rounded-2 border-muted"
                                    type="text" placeholder="Message:*" aria-label="default input example" rows="3"
                                    name="message" v-model="inputData.message" required></textarea>
                            </div>
                            <div class="col-12 px-lg-3 pt-4">
                                <button
                                    class="w-100 fw-bolder text-white btn border-0 font-16 py-lg-3 py-2 bg-blue1 text-center rounded-pill hvr-btn">
                                    Submit
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import LoaderIcon from '@/components/icons/loader-icon.vue';
import Swal from 'sweetalert2';

export default {
    components: {
        LoaderIcon
    },
    data() {
        return {
            inputData: {
                name: '',
                email: '',
                phone_number: '',
                inquiry_type_id: '',
                message: '',
                request_method: 'Inquiry'
            },
            isLoading: false,
            isError: false,
            isSubmitted: false
        };
    },
    computed: {
        message() {
            return this.$store.getters['inquiryForm/formMessage'];
        }
    },
    methods: {

        submitForm() {
            this.isLoading = true;
            let name = this.inputData.name;
            let email = this.inputData.email;
            let phone_number = this.inputData.phone_number;
            let inquiry_type_id = this.inputData.inquiry_type_id;
            let message = this.inputData.message;
            let request_method = this.inputData.request_method;

            this.$store.dispatch("inquiryForm/inquirySubmitForm", { name, email, phone_number, inquiry_type_id, message, request_method })
                .then((response) => {
                    if (response[0] == 1) {
                        this.isLoading = false;
                        this.inputData = {
                            name: '',
                            email: '',
                            phone_number: '',
                            inquiry_type_id: '',
                            message: '',
                        };

                        this.message = response[1];
                        this.isError = false;
                        this.isSubmitted = true;
                        console.log(this.message);

                        // Success
                        Swal.fire({
                            icon: 'success',
                            title: 'Success!',
                            text: this.message,
                        });

                    } else {
                        this.isLoading = true;

                        this.message = "Failed to submit the inquiry. Please try again.";
                        this.isError = true;

                        // Failed
                        Swal.fire({
                            icon: 'error',
                            title: 'Error!',
                            text: this.message,
                        });
                    }
                })
                .catch((error) => {

                    this.isLoading = false;
                    console.error("Inquiry response error:", error);
                    this.message = `Error submitting the form: ${error.message}`;
                    this.isError = true;

                    // Failed
                    Swal.fire({
                        icon: 'error',
                        title: 'Error!',
                        text: this.message,
                    });
                });

        }
    }
};
</script>
